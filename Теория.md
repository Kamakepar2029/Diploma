# Теоретическая часть.
## 1. Подготовка к организации изолированной сети
### 1.1 Построение логической топологии
Для начала необходимо разработать топологию данной сети. То есть как обьекты сети будут между собой взаимодействовать и как будет реализована та или иная топология.

Для данной работы будет использовано два сервера. Обозначим сервера 1 и 2 соответственно SE1, SE2. У данных серверов есть внешние IP адреса, так как они будут передавать данные между собой.

Так же в данной топологии будет два компьютера, которые я обозначу PC1 и PC2 соотвественно. Данная изолированная сеть будет иметь доменный контроллер под управлением Samba и средства управления им на клиентских машинах. А данные с доменных контроллеров будут реплицироваться с SE1 на SE2 и наоборот.
Таким образом можем представить такую карту сети:
![Logical Topology](https://user-images.githubusercontent.com/58629552/172162321-5993be3a-9cb7-47f2-b9d6-c67b54e49abc.png)
*Рис.1. Топология*

На данной топологии видно, что VPN туннель будет проходить от SE1 к PC1 и от SE2 к PC2. На SE1 и на SE2 будет одинаковый набор сервисов, поскольку репликация должна работать в обе стороны.
### 1.2 Выбор операционной системы для сервера
Поскольку Samba будет контроллером Active Directory, то операционная система будет Linux. Но нужно выбрать на каком семействе линукс будет работать контроллер. Либо GNU/Linux, либо Rhel. Сначала надо рассмотреть преимущества тех или иных семейств и систем.

1.2.1. Семейство GNU/Linux
В семейство GNU/Linux входят такие системы как Ubuntu, Debian, Kali и другие. Они используются для различных целей и задач, поэтому их можно использовать как контроллеры Active Directory. Ubuntu чаще всего используется как операционная система для персонального компьютера, хоть у нее есть серверная версия. Но, к сожалению, в ней чаще всего происходят ошибки ядра, так что она не подходит. Kali - система, которая предназначена для пентеста, то есть тестирования систем или устройств на уязвимости и не подходит на роль сервера. На текущий момент самой стабильной системой, которая имеет поддержку из трех систем, которые я назвал - это Debian. Он может выдержать довольно большие нагрузки и предназначен как для использования на персональном пк, так и в качестве сервера. Теперь рассмотрим семейство Rhel.

1.2.2. Семейство RHEL
В семейство RHEl входит сам RHEl (Red Hat Enterprise Linux) и CentOS. CentOS основан на RHEL, но поддержка CentOS в компании Red Hat прекращается уже через год, поэтому если его выбрать как серверную систему, для развертывания доменного контроллера. В таком случае, при возникновения неизвестной ошибки, обратиться за помощью будет не куда. Что касается, Red Hat Enterprise Linux, то RHEL является платным, поэтому лучше выбрать любую систему из семейства Gnu/Linux.

В итоге, выбор системы для развертывания VPN, Active Directory на Samba лучше остановить на Debian из семейства GNU/Linux.

## 2. VPN
### 2.1 Принцип работы VPN

### 2.2 Протоколы для реализации VPN
